import{r as a,j as e,t,E as F,F as M}from"./index-ClTdhUSR.js";function L({patientId:p,onUpload:f}){const[u,m]=a.useState(""),[h,d]=a.useState(""),[n,x]=a.useState(null),[b,y]=a.useState(!1),[N,l]=a.useState(""),[j,g]=a.useState(""),v=o=>{const r=o.target.files[0];if(r){if(r.size>5*1024*1024){l("File size must be less than 5MB");return}if(!["image/jpeg","image/png","image/gif","application/pdf","text/plain"].includes(r.type)){l("File type not supported. Please upload JPEG, PNG, GIF, PDF, or TXT files.");return}x(r),l("")}},w=o=>new Promise((r,i)=>{const s=new FileReader;s.readAsDataURL(o),s.onload=()=>r(s.result),s.onerror=c=>i(c)}),S=async o=>{if(o.preventDefault(),!u.trim()){l("Title is required");return}if(!h.trim()){l("Notes are required");return}y(!0),l(""),g("");try{let r=null,i=null;n&&(r=await w(n),i=n.name);const s={patientId:p,title:u.trim(),notes:h.trim(),fileName:i,fileData:r,uploadedBy:"user",uploadedAt:new Date().toISOString()},c=F(s);c.success?(g("Health record uploaded successfully!"),m(""),d(""),x(null),f&&f(c.record),setTimeout(()=>g(""),3e3)):l(c.error||"Failed to upload health record")}catch(r){console.error("Error uploading health record:",r),l("An error occurred while uploading the file")}finally{y(!1)}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:t("Upload Health Record")}),j&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-sm text-green-800",children:j})}),N&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:N})}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("Title")," *"]}),e.jsx("input",{type:"text",value:u,onChange:o=>m(o.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("Enter record title")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("Notes")," *"]}),e.jsx("textarea",{value:h,onChange:o=>d(o.target.value),required:!0,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("Enter detailed notes about this health record")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("Attach File")," (",t("Optional"),")"]}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:t("Upload a file")}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:v,accept:".jpg,.jpeg,.png,.gif,.pdf,.txt"})]}),e.jsx("p",{className:"pl-1",children:t("or drag and drop")})]}),e.jsx("p",{className:"text-xs text-gray-500",children:t("PNG, JPG, GIF, PDF, TXT up to 5MB")})]})}),n&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-md",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[t("Selected file"),": ",n.name]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t("Size"),": ",(n.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?t("Uploading..."):t("Upload Record")})]})]})}function T({onSelect:p,showAddToCart:f=!1,onAddToCart:u}){const[m,h]=a.useState([]),[d,n]=a.useState(""),[x,b]=a.useState(""),[y,N]=a.useState(!1),[l,j]=a.useState("");a.useEffect(()=>{g()},[]);const g=()=>{try{const s=M();h(s)}catch(s){console.error("Error loading medicines:",s),j("Failed to load medicines")}},v=s=>{n(s.target.value)},w=s=>{b(s.target.value)},S=s=>{p&&p(s)},o=s=>{u&&u(s)},r=m.filter(s=>{const c=s.name.toLowerCase().includes(d.toLowerCase())||s.company.toLowerCase().includes(d.toLowerCase())||s.description.toLowerCase().includes(d.toLowerCase()),C=!x||s.category===x;return c&&C}),i=[...new Set(m.map(s=>s.category))];return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:t("Medicine Search")}),l&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:l})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Search Medicines")}),e.jsx("input",{type:"text",value:d,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("Enter medicine name, company, or description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("Category")}),e.jsxs("select",{value:x,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:t("All Categories")}),i.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:t("No medicines found")}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:t("Try adjusting your search terms or category filter")})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.company}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.category}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:s.dosage})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["â‚¹",s.price]})})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>S(s),className:"flex-1 px-3 py-2 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",children:t("View Details")}),f&&e.jsx("button",{onClick:()=>o(s),className:"flex-1 px-3 py-2 bg-green-100 text-green-700 text-sm rounded-md hover:bg-green-200 transition-colors",children:t("Add to Cart")})]})]},s.id))})}),r.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[t("Showing")," ",r.length," ",t("of")," ",m.length," ",t("medicines")]})]})}export{L as H,T as M};
