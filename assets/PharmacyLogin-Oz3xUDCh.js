import{u as v,r as c,j as e,t as r,Q as y,s as b,R as S}from"./index-ClTdhUSR.js";function C(){const g=v(),[t,h]=c.useState("login"),[a,f]=c.useState({name:"",phone:"",email:"",address:"",license:""}),[d,m]=c.useState(!1),[x,n]=c.useState(""),[p,u]=c.useState(""),o=i=>{const{name:s,value:l}=i.target;f(N=>({...N,[s]:l}))},w=async i=>{if(i.preventDefault(),!a.phone.trim()){n("Phone number is required");return}m(!0),n(""),u("");try{const s=y(a.phone);s?(b({current:{role:"pharmacy",id:s.id,name:s.name,loggedAt:new Date().toISOString()}}),u("Login successful!"),setTimeout(()=>{g("/pharmacy/dashboard")},1e3)):n("Pharmacy not found. Please check your phone number or sign up.")}catch(s){n("An error occurred while logging in"),console.error("Login error:",s)}finally{m(!1)}},j=async i=>{if(i.preventDefault(),!a.name.trim()){n("Pharmacy name is required");return}if(!a.phone.trim()){n("Phone number is required");return}m(!0),n(""),u("");try{if(y(a.phone)){n("Pharmacy with this phone number already exists.");return}const l=S({name:a.name.trim(),phone:a.phone.trim(),email:a.email.trim(),address:a.address.trim(),license:a.license.trim(),role:"pharmacy"});l.success?(b({current:{role:"pharmacy",id:l.pharmacy.id,name:l.pharmacy.name,loggedAt:new Date().toISOString()}}),u("Account created successfully!"),setTimeout(()=>{g("/pharmacy/dashboard")},1500)):n(l.error||"Failed to create account")}catch(s){n("An error occurred while creating account"),console.error("Signup error:",s)}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-yellow-50 to-yellow-100 font-sans",children:[e.jsx("main",{className:"flex-grow flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-yellow-100",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:t==="login"?r("Pharmacy Login"):r("Create Pharmacy Account")}),e.jsx("p",{className:"text-gray-600",children:t==="login"?r("Login to manage your pharmacy"):r("Join E-Sannidhi as a pharmacy partner")})]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-sm text-green-800",children:p})}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:x})}),e.jsxs("div",{className:"flex mb-6 space-x-4",children:[e.jsx("button",{className:`flex-1 px-4 py-2 rounded-lg font-medium transition ${t==="login"?"bg-yellow-600 text-white shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>h("login"),children:r("Login")}),e.jsx("button",{className:`flex-1 px-4 py-2 rounded-lg font-medium transition ${t==="signup"?"bg-yellow-600 text-white shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>h("signup"),children:r("Sign Up")})]}),t==="login"&&e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("Phone Number")," *"]}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:r("Enter phone number")})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-yellow-600 text-white py-2 rounded-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?r("Logging in..."):r("Login")})]}),t==="signup"&&e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("Pharmacy Name")," *"]}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:r("Enter pharmacy name")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("Phone Number")," *"]}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:r("Enter phone number")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("Email")," (Optional)"]}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:r("Enter email address")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("Address")," (Optional)"]}),e.jsx("textarea",{name:"address",value:a.address,onChange:o,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:r("Enter pharmacy address")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("License Number")," (Optional)"]}),e.jsx("input",{type:"text",name:"license",value:a.license,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:r("Enter license number")})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-yellow-600 text-white py-2 rounded-lg hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?r("Creating Account..."):r("Create Account")})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-6 text-center",children:e.jsx("button",{onClick:()=>g("/"),className:"text-yellow-700 font-semibold hover:underline",children:r("Back to Home")})})]})}),e.jsxs("footer",{className:"bg-yellow-900 text-white py-4 text-center text-sm mt-8 shadow-inner",children:["Â© ",new Date().getFullYear()," ",r("E-Sannidhi")," | ",r("Government of India Initiative")]})]})}export{C as default};
