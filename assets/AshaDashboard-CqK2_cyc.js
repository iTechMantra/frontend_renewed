import{r as i,j as e,t as s,c as M,C as $,D as S,k as D,u as R,e as C,m as H,f as E}from"./index-ClTdhUSR.js";import{H as z,M as W}from"./MedicineSearch-BhAHME3E.js";import{M as B}from"./MessageVideoSection-D20M9Bnv.js";function V({onPatientAdded:h}){const[a,p]=i.useState({name:"",age:"",gender:"",phone:"",village:"",address:"",notes:""}),[o,x]=i.useState(!1),[j,c]=i.useState(""),[u,f]=i.useState(""),g=r=>{const{name:n,value:l}=r.target;p(m=>({...m,[n]:l}))},v=async r=>{if(r.preventDefault(),!a.name.trim()){c("Patient name is required");return}if(!a.age.trim()){c("Patient age is required");return}if(!a.gender.trim()){c("Patient gender is required");return}if(!a.village.trim()){c("Village is required");return}if(isNaN(a.age)||a.age<0||a.age>120){c("Please enter a valid age");return}x(!0),c(""),f("");try{const n=M();if(!n){c("Please log in to add patients");return}const l={name:a.name.trim(),age:parseInt(a.age),gender:a.gender,phone:a.phone.trim(),village:a.village.trim(),address:a.address.trim(),notes:a.notes.trim(),ownerRole:"asha",ownerId:n.id,ownerName:n.name,assignedDoctorId:null,status:"active"},m=$(l);m.success?(f("Patient added successfully!"),p({name:"",age:"",gender:"",phone:"",village:"",address:"",notes:""}),h&&h(m.patient),setTimeout(()=>f(""),3e3)):c(m.error||"Failed to add patient")}catch(n){console.error("Error adding patient:",n),c("An error occurred while adding the patient")}finally{x(!1)}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Add New Patient")}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-sm text-green-800",children:u})}),j&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:j})}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Patient Name")," *"]}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:s("Enter patient's full name")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Age")," *"]}),e.jsx("input",{type:"number",name:"age",value:a.age,onChange:g,required:!0,min:"0",max:"120",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:s("Enter age")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Gender")," *"]}),e.jsxs("select",{name:"gender",value:a.gender,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:s("Select gender")}),e.jsx("option",{value:"male",children:s("Male")}),e.jsx("option",{value:"female",children:s("Female")}),e.jsx("option",{value:"other",children:s("Other")})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Phone Number")," (",s("Optional"),")"]}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:s("Enter phone number")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Village/Location")," *"]}),e.jsx("input",{type:"text",name:"village",value:a.village,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:s("Enter village or location")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Address")," (",s("Optional"),")"]}),e.jsx("textarea",{name:"address",value:a.address,onChange:g,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:s("Enter detailed address")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Notes")," (",s("Optional"),")"]}),e.jsx("textarea",{name:"notes",value:a.notes,onChange:g,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:s("Enter any additional notes about the patient")})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?s("Adding Patient..."):s("Add Patient")})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsxs("strong",{children:[s("Note"),":"]})," ",s("All fields marked with * are required. The patient will be registered under your ASHA account and can be managed through your dashboard.")]})})]})}function T(){const[h,a]=i.useState(null),[p,o]=i.useState([]),[x,j]=i.useState(!0),[c,u]=i.useState("");i.useEffect(()=>{const l=M();l&&(a(l),f(l.id)),j(!1)},[]);const f=l=>{try{const m=S("asha",l);o(m)}catch(m){console.error("Error loading campaign data:",m),u("Failed to load campaign data")}},g=()=>{const l=p.length,m=new Date;m.setDate(1);const y=p.filter(b=>new Date(b.createdAt)>=m).length,N=new Date;N.setDate(N.getDate()-7);const w=p.filter(b=>new Date(b.createdAt)>=N).length,t=l,d=y,k=w,L=JSON.parse(localStorage.getItem("ashas")||"[]"),A=L.map(b=>{const P=S("asha",b.id);return{id:b.id,name:b.name,patientCount:P.length}}).sort((b,P)=>P.patientCount-b.patientCount).findIndex(b=>b.id===h?.id)+1;return{totalPatients:l,monthlyPatients:y,weeklyPatients:w,totalPoints:t,monthlyPoints:d,weeklyPoints:k,currentRank:A,totalAshas:L.length}},v=l=>l>=100?{level:"Gold",color:"text-yellow-600",bgColor:"bg-yellow-100"}:l>=50?{level:"Silver",color:"text-gray-600",bgColor:"bg-gray-100"}:l>=25?{level:"Bronze",color:"text-orange-600",bgColor:"bg-orange-100"}:{level:"Starter",color:"text-blue-600",bgColor:"bg-blue-100"};if(x)return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})]})});if(!h)return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:e.jsx("p",{className:"text-gray-500",children:s("Please log in to view campaign data")})});const r=g(),n=v(r.totalPoints);return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Campaign Progress")}),c&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:c})}),e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:s("Achievement Level")}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Current level based on your performance")})]}),e.jsx("div",{className:`px-4 py-2 rounded-full ${n.bgColor}`,children:e.jsx("span",{className:`font-bold ${n.color}`,children:n.level})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("Total Patients")}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.totalPatients})]})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("This Month")}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.monthlyPatients})]})]})}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("Total Points")}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.totalPoints})]})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("Rank")}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["#",r.currentRank," ",s("of")," ",r.totalAshas]})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:s("Recent Patients")}),p.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:s("No patients registered yet")}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s("Start by adding your first patient to begin your campaign")})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.slice(0,10).map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[l.age," ",s("years")," â€¢ ",l.village]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:new Date(l.createdAt).toLocaleDateString()})})]},l.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:s("Campaign Goals")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[s("Next Level"),": ",s("Silver")," (50 ",s("patients"),")"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min(r.totalPatients/50*100,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[s("Monthly Target"),": 20 ",s("patients")]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min(r.monthlyPatients/20*100,100)}%`}})})]})]})]}),e.jsxs("div",{className:"mt-6 flex space-x-3",children:[e.jsx("button",{className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:s("View Full Report")}),e.jsx("button",{className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:s("Share Progress")})]})]})}function q({userLocation:h,onPharmacySelect:a}){const[p,o]=i.useState([]),[x,j]=i.useState([]),[c,u]=i.useState(!0);i.useEffect(()=>{f()},[]);const f=()=>{try{const r=D();o(r),h?g(r,h):j(r),u(!1)}catch(r){console.error("Error loading pharmacies:",r),u(!1)}},g=(r,n)=>{const m=r.map(y=>{const N=Math.random()*10+.5;return{...y,distance:Math.round(N*10)/10}}).sort((y,N)=>y.distance-N.distance);j(m.slice(0,5))},v=r=>{a&&a(r)};return c?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[s("Finding Nearest Pharmacies"),"..."]}),e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(r=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},r))})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:h?s("Nearest Pharmacies"):s("Available Pharmacies")}),x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:s("No pharmacies found")}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s("Try refreshing or check back later")})]}):e.jsx("div",{className:"space-y-4",children:x.map(r=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>v(r),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.address||s("Address not available")}),r.phone&&e.jsxs("p",{className:"text-sm text-gray-500",children:[s("Phone"),": ",r.phone]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.distance&&e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.distance," km"]}),r.license&&e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("Licensed")]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),v(r)},className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded-md hover:bg-yellow-700 transition-colors",children:s("Select")}),r.phone&&e.jsx("a",{href:`tel:${r.phone}`,onClick:n=>n.stopPropagation(),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors text-center",children:s("Call")})]})]})},r.id))}),!h&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsxs("strong",{children:[s("Tip"),":"]})," ",s("Enable location services to see the nearest pharmacies to you")]})})]})}function G(){const h=R(),[a,p]=i.useState(null),[o,x]=i.useState("home"),[j,c]=i.useState([]),[u,f]=i.useState(null),[g,v]=i.useState(!0);i.useEffect(()=>{const t=M();if(!t||t.role!=="asha"){h("/asha/login");return}p(t),r(t.id),v(!1)},[h]);const r=t=>{try{const d=S("asha",t);c(d)}catch(d){console.error("Error loading ASHA data:",d)}},n=()=>{H(),h("/")},l=t=>{c(d=>[...d,t])},m=t=>{u&&C(u.id)},y=t=>{alert(`${s("Medicine Details")}:

${s("Name")}: ${t.name}
${s("Company")}: ${t.company||s("Not specified")}
${s("Dosage")}: ${t.dosage||s("Not specified")}
${s("Category")}: ${t.category||s("Not specified")}
${s("Price")}: â‚¹${t.price||s("Not specified")}`)},N=t=>{alert(`${t.name} ${s("added to cart")}!`)},w=t=>{const d=C(t.id),k=E(t.id);return{healthRecords:d.length,prescriptions:k.length}};return g?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:s("Loading dashboard...")})]})}):a?e.jsxs("div",{className:"flex flex-col h-screen bg-gray-100",children:[e.jsx("header",{className:"bg-white shadow-md flex justify-between items-center px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[s("Welcome"),", ",a.name]}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors",children:s("Logout")})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-white shadow-xl flex flex-col",children:[e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:[{key:"home",label:s("Home"),icon:"ðŸ "},{key:"add_patient",label:s("Add Patient"),icon:"âž•"},{key:"patients",label:s("Patients"),icon:"ðŸ‘¥"},{key:"records",label:s("Health Records"),icon:"ðŸ“‹"},{key:"medicine",label:s("Medicine Search"),icon:"ðŸ”"},{key:"pharmacy",label:s("Nearest Pharmacy"),icon:"ðŸ¥"},{key:"chat",label:s("Chat / Video"),icon:"ðŸ’¬"},{key:"campaign",label:s("Campaign"),icon:"ðŸ†"},{key:"profile",label:s("Profile"),icon:"ðŸ‘¤"}].map(t=>e.jsxs("button",{onClick:()=>x(t.key),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors ${o===t.key?"bg-purple-600 text-white shadow-md":"hover:bg-purple-100 text-gray-700"}`,children:[e.jsx("span",{className:"mr-3",children:t.icon}),t.label]},t.key))}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("button",{onClick:n,className:"w-full text-left px-4 py-3 rounded-lg font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:[e.jsx("span",{className:"mr-3",children:"ðŸšª"}),s("Logout")]})})]}),e.jsx("div",{className:"flex-1 flex justify-center items-start p-6 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-6xl",children:[o==="home"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-8 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:[s("Welcome back"),", ",a.name," ðŸ‘©â€âš•ï¸"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:s("Manage your patients and provide community healthcare services")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Patients Added")})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.location||"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Location")})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"ASHA"}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Role")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("button",{onClick:()=>x("add_patient"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"âž•"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Add Patient")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Register new patients in your community")})]}),e.jsxs("button",{onClick:()=>x("patients"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ‘¥"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("View Patients")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Manage your registered patients")})]}),e.jsxs("button",{onClick:()=>x("medicine"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ”"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Medicine Search")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Search for medicines and information")})]}),e.jsxs("button",{onClick:()=>x("chat"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ’¬"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Consult Doctor")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Connect with doctors for patient care")})]}),e.jsxs("button",{onClick:()=>x("campaign"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ†"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Campaign Progress")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Track your community health impact")})]})]})]}),o==="add_patient"&&e.jsx(V,{onPatientAdded:l}),o==="patients"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Your Patients")}),j.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:s("No patients added yet. Start by adding your first patient!")}):e.jsx("div",{className:"space-y-4",children:j.map(t=>{const d=w(t);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:t.photo?e.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover rounded-full"}):e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.age," ",s("years")," â€¢ ",t.village]})]})]}),e.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[s("Health Records"),": ",d.healthRecords]}),e.jsxs("span",{children:[s("Prescriptions"),": ",d.prescriptions]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>{f(t),x("records")},className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",children:s("View Records")})})]})},t.id)})})]}),o==="records"&&e.jsx("div",{className:"space-y-6",children:u?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:[s("Health Records for")," ",u.name]}),e.jsx("button",{onClick:()=>f(null),className:"text-sm text-purple-600 hover:underline",children:s("â† Back to all patients")})]}),e.jsx(z,{patientId:u.id,onUpload:m}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:s("Health Records")}),(()=>{const t=C(u.id);return t.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:s("No health records uploaded yet")}):e.jsx("div",{className:"space-y-3",children:t.map(d=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600",children:d.notes}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s("Uploaded"),": ",new Date(d.createdAt).toLocaleDateString()]})]}),e.jsx("div",{className:"flex space-x-2",children:d.fileName&&e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",children:s("View File")})})]})},d.id))})})()]})]}):e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:e.jsx("p",{className:"text-gray-500",children:s("Select a patient to view their health records")})})}),o==="medicine"&&e.jsx(W,{onSelect:y,showAddToCart:!0,onAddToCart:N}),o==="pharmacy"&&e.jsx(q,{userLocation:a.location,onPharmacySelect:t=>{alert(`${s("Selected Pharmacy")}: ${t.name}
${s("Phone")}: ${t.phone||s("Not available")}
${s("Address")}: ${t.address||s("Not available")}`)}}),o==="chat"&&e.jsx(B,{userId:a.id,userName:a.name,messages:[],onSendMessage:()=>{},showCreateVisit:!0,onVisitCreated:t=>{alert(`${s("Visit created successfully!")} ${s("Visit ID")}: ${t.id}`)}}),o==="campaign"&&e.jsx(T,{}),o==="profile"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Profile")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Name")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Phone")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Email")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.email||s("Not specified")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Location")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.location||s("Not specified")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Aadhaar Number")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.aadhaar||s("Not specified")})]})]})]})]})})]})]}):null}export{G as default};
