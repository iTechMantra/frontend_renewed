import{u as D,r as d,i as A,c as O,d as h,e as H,f as R,h as U,j as e,t as s,k as $,m as L}from"./index-ClTdhUSR.js";import{H as M,M as T}from"./MedicineSearch-BhAHME3E.js";import{M as E}from"./MessageVideoSection-D20M9Bnv.js";function F(){const x=D(),[a,g]=d.useState(null),[r,n]=d.useState("home"),[c,m]=d.useState([]),[o,b]=d.useState([]),[i,u]=d.useState([]),[p,j]=d.useState(!0);d.useEffect(()=>{A();let t=O();if(!t){const l=h("session",null);l&&l.current?t=l.current:t=h("currentUser",null)}if(!t){x("/user/login");return}g(t),N(t.id),j(!1)},[x]);const N=t=>{try{const l=H(t);m(l);const C=R(t);b(C);const S=U().filter(P=>P.userId===t);u(S)}catch(l){console.error("Error loading user data:",l)}},y=()=>{L(),x("/")},f=t=>{m(l=>[...l,t])},v=t=>{const l=[s("Name")+": "+t.name,s("Company")+": "+(t.company||s("Not specified")),s("Dosage")+": "+(t.dosage||s("Not specified")),s("Category")+": "+(t.category||s("Not specified")),s("Price")+": â‚¹"+(t.price||s("Not specified"))];alert(s("Medicine Details")+`:

`+l.join(`
`))},w=t=>{alert((t.name||s("Medicine"))+" "+s("added to cart")+"!")},k=()=>{alert(s("Order creation functionality would be implemented here"))};return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:s("Loading dashboard...")})]})}):a?e.jsx("div",{className:"flex flex-col h-screen bg-gray-100",children:e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-white shadow-xl flex flex-col",children:[e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:[{key:"home",label:s("Home"),icon:"ðŸ "},{key:"profile",label:s("Profile"),icon:"ðŸ‘¤"},{key:"records",label:s("Health Records"),icon:"ðŸ“‹"},{key:"prescriptions",label:s("Prescriptions"),icon:"ðŸ’Š"},{key:"medicine",label:s("Medicine Search"),icon:"ðŸ”"},{key:"pharmacy",label:s("Nearest Pharmacy"),icon:"ðŸ¥"},{key:"orders",label:s("Orders"),icon:"ðŸ“¦"},{key:"chat",label:s("Chat / Video"),icon:"ðŸ’¬"}].map(t=>e.jsxs("button",{onClick:()=>n(t.key),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors ${r===t.key?"bg-blue-600 text-white shadow-md":"hover:bg-blue-100 text-gray-700"}`,children:[e.jsx("span",{className:"mr-3",children:t.icon}),t.label]},t.key))}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("button",{onClick:y,className:"w-full text-left px-4 py-3 rounded-lg font-medium bg-red-500 text-white hover:bg-red-600 transition-colors",children:[e.jsx("span",{className:"mr-3",children:"ðŸšª"}),s("Logout")]})})]}),e.jsx("div",{className:"flex-1 flex justify-center items-start p-6 overflow-y-auto",children:e.jsxs("div",{className:"w-full max-w-6xl",children:[r==="home"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-8 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:[s("Welcome back"),", ",a.name||s("User")]}),e.jsx("p",{className:"text-gray-600 mb-6",children:s("Access your health records, prescriptions, and connect with healthcare providers")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Health Records")})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Prescriptions")})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Orders")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("button",{onClick:()=>n("records"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ“‹"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Health Records")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Upload and manage your health records")})]}),e.jsxs("button",{onClick:()=>n("medicine"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ”"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Medicine Search")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Search for medicines and get information")})]}),e.jsxs("button",{onClick:()=>n("chat"),className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ’¬"}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:s("Consult Doctor")}),e.jsx("p",{className:"text-gray-600 text-sm",children:s("Start a video consultation with a doctor")})]})]})]}),r==="profile"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:s("User Profile")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Name")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:a.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Phone")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:a.phone||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Age")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:a.age?`${a.age} ${s("years")}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Village")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:a.village||a.location?.name||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:s("Account Created")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"Recently"})]}),e.jsxs("div",{className:"pt-6 border-t",children:[e.jsx("h4",{className:"text-md font-medium text-gray-800 mb-4",children:s("Health Summary")}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Health Records")})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Prescriptions")})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Orders")})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length>0?"Recent":"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Last Order")})]})]})]}),e.jsx("div",{className:"pt-6 border-t",children:e.jsx("button",{onClick:()=>alert(s("Profile editing functionality would be implemented here")),className:"w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:s("Edit Profile")})})]})]}),r==="records"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Health Records")}),e.jsx(M,{patientId:a.id,onUpload:f})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:s("Your Health Records")}),c.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:s("No health records uploaded yet")}):e.jsx("div",{className:"space-y-3",children:c.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.notes}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s("Uploaded"),": ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsx("div",{className:"flex space-x-2",children:t.fileName&&e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",children:s("View File")})})]})},t.id))})]})]}),r==="prescriptions"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Prescriptions")}),o.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:s("No prescriptions received yet")}):e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h5",{className:"font-medium text-gray-900 mb-2",children:[s("Prescription")," #",t.id.slice(-8)]}),e.jsx("p",{className:"text-gray-700 mb-2",children:t.text}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[s("Doctor"),": ",t.doctorName||s("Unknown")]}),e.jsxs("span",{children:[s("Date"),": ",new Date(t.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-md hover:bg-green-200 transition-colors",children:s("Download")})})]})},t.id))})]}),r==="medicine"&&e.jsx(T,{onSelect:v,showAddToCart:!0,onAddToCart:w}),r==="pharmacy"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Nearest Pharmacies")}),e.jsx("div",{className:"space-y-4",children:$().map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.isOpen?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isOpen?s("Open"):s("Closed")})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:t.address}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:t.phone}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[t.distance," away"]}),e.jsx("p",{className:"text-xs text-gray-500",children:t.openTime==="24/7"?s("Open 24/7"):`${s("Hours")}: ${t.openTime} - ${t.closeTime}`})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",onClick:()=>alert(`${s("Calling")} ${t.name}...`),children:s("Call")}),e.jsx("button",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-md hover:bg-green-200 transition-colors",onClick:()=>alert(`${s("Getting directions to")} ${t.name}...`),children:s("Directions")})]})]})},t.id))})]}),r==="orders"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s("Orders")}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:s("Create Order")})]}),i.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:s("No orders placed yet")}):e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-gray-900",children:[s("Order")," #",t.id.slice(-8)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s("Status"),": ",e.jsx("span",{className:`capitalize font-semibold ${t.status==="delivered"?"text-green-600":t.status==="shipped"?"text-blue-600":t.status==="processing"?"text-orange-600":"text-gray-600"}`,children:t.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s("Pharmacy"),": ",t.pharmacyName]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s("Date"),": ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["â‚¹",t.total]}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",children:s("Track")})]})]})},t.id))})]}),r==="chat"&&e.jsx(E,{})]})})]})}):null}export{F as default};
