import{r as o,F as C,j as e,t as s,u as M,M as q,N as E,O as L,P}from"./index-ClTdhUSR.js";function O({onAddToCart:u}){const[g,j]=o.useState([]),[l,x]=o.useState(""),[d,m]=o.useState(""),[n,i]=o.useState(null),[b,N]=o.useState(!1),[h,v]=o.useState("");o.useEffect(()=>{y()},[]);const y=()=>{try{const r=C();j(r)}catch(r){console.error("Error loading medicines:",r),v("Failed to load medicines")}},p=r=>{x(r.target.value)},w=r=>{m(r.target.value)},f=r=>{i(r)},t=r=>{u&&u(r)},a=g.filter(r=>{const S=r.name.toLowerCase().includes(l.toLowerCase())||r.company.toLowerCase().includes(l.toLowerCase())||r.description.toLowerCase().includes(l.toLowerCase()),k=!d||r.category===d;return S&&k}),c=[...new Set(g.map(r=>r.category))];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:s("Search Medicines")}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:h})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("Search Medicines")}),e.jsx("input",{type:"text",value:l,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:s("Enter medicine name, company, or description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("Category")}),e.jsxs("select",{value:d,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:s("All Categories")}),c.map(r=>e.jsx("option",{value:r,children:r},r))]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:s("Available Medicines")}),a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:s("No medicines found")}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s("Try adjusting your search terms or category filter")})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(r=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-1",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r.company}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:r.category}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:r.dosage})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["â‚¹",r.price]})})]}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.description}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f(r),className:"flex-1 px-3 py-2 bg-blue-100 text-blue-700 text-sm rounded-md hover:bg-blue-200 transition-colors",children:s("View Details")}),e.jsx("button",{onClick:()=>t(r),className:"flex-1 px-3 py-2 bg-yellow-100 text-yellow-700 text-sm rounded-md hover:bg-yellow-200 transition-colors",children:s("Add to Cart")})]})]},r.id))}),a.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[s("Showing")," ",a.length," ",s("of")," ",g.length," ",s("medicines")]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s("Medicine Details")}),e.jsx("button",{onClick:()=>i(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s("Name")}),e.jsx("p",{className:"text-gray-700",children:n.name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s("Company")}),e.jsx("p",{className:"text-gray-700",children:n.company})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s("Dosage")}),e.jsx("p",{className:"text-gray-700",children:n.dosage})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s("Category")}),e.jsx("p",{className:"text-gray-700",children:n.category})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s("Price")}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["â‚¹",n.price]})]}),n.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s("Description")}),e.jsx("p",{className:"text-gray-700",children:n.description})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{t(n),i(null)},className:"flex-1 bg-yellow-600 text-white py-2 px-4 rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 transition-colors",children:s("Add to Cart")}),e.jsx("button",{onClick:()=>i(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:s("Close")})]})]})]})})})]})}function I(){const u=M(),[g,j]=o.useState([]),[l,x]=o.useState([]),[d,m]=o.useState("search"),[n,i]=o.useState({name:"",phone:"",address:"",notes:""}),[b,N]=o.useState(!1);o.useEffect(()=>{h()},[]);const h=()=>{try{const t=C();j(t);const a=q();x(a)}catch(t){console.error("Error loading pharmacy data:",t)}},v=t=>{try{E(t),h()}catch(a){console.error("Error adding to cart:",a)}},y=t=>{try{const a=l.filter(c=>c.medicineId!==t);x(a),localStorage.setItem("cart",JSON.stringify(a))}catch(a){console.error("Error removing from cart:",a)}},p=(t,a)=>{if(a<=0){y(t);return}try{const c=l.map(r=>r.medicineId===t?{...r,quantity:a}:r);x(c),localStorage.setItem("cart",JSON.stringify(c))}catch(c){console.error("Error updating quantity:",c)}},w=async t=>{if(t.preventDefault(),!n.name.trim()){alert("Name is required");return}if(!n.phone.trim()){alert("Phone number is required");return}if(!n.address.trim()){alert("Address is required");return}if(l.length===0){alert("Cart is empty");return}N(!0);try{const a={name:n.name.trim(),phone:n.phone.trim(),address:n.address.trim(),notes:n.notes.trim(),items:l.map(c=>({medicineId:c.medicineId,medicineName:c.medicine.name,quantity:c.quantity,price:c.medicine.price||0})),total:l.reduce((c,r)=>c+(r.medicine.price||0)*r.quantity,0),status:"pending",createdAt:new Date().toISOString()};L(a),P(),x([]),i({name:"",phone:"",address:"",notes:""}),alert("Order placed successfully! A pharmacist will contact you soon."),m("search")}catch(a){console.error("Error placing order:",a),alert("Failed to place order. Please try again.")}finally{N(!1)}},f=()=>l.reduce((t,a)=>t+(a.medicine.price||0)*a.quantity,0);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-md",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>u("/"),children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-600 text-white rounded-full flex items-center justify-center font-bold shadow",children:"ðŸ›"}),e.jsx("h1",{className:"text-xl font-bold text-yellow-700",children:s("E-Sannidhi Pharmacy")})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>m("search"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="search"?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:s("Search")}),e.jsxs("button",{onClick:()=>m("cart"),className:`px-4 py-2 rounded-lg font-medium transition-colors relative ${d==="cart"?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[s("Cart"),l.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:l.length})]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d==="search"&&e.jsx(O,{onAddToCart:v}),d==="cart"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:s("Shopping Cart")}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:s("Your cart is empty")}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s("Add some medicines to get started")}),e.jsx("button",{onClick:()=>m("search"),className:"mt-4 px-6 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:s("Start Shopping")})]}):e.jsxs("div",{className:"space-y-4",children:[l.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.medicine.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.medicine.company," â€¢ ",t.medicine.dosage]}),e.jsxs("p",{className:"text-sm font-medium text-green-600",children:["â‚¹",t.medicine.price||0," ",s("each")]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>p(t.medicineId,t.quantity-1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:"-"}),e.jsx("span",{className:"w-8 text-center",children:t.quantity}),e.jsx("button",{onClick:()=>p(t.medicineId,t.quantity+1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:"+"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-medium text-gray-900",children:["â‚¹",(t.medicine.price||0)*t.quantity]})}),e.jsx("button",{onClick:()=>y(t.medicineId),className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},t.medicineId)),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsxs("span",{children:[s("Total"),":"]}),e.jsxs("span",{children:["â‚¹",f()]})]}),e.jsx("button",{onClick:()=>m("orders"),className:"w-full mt-4 px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium",children:s("Proceed to Checkout")})]})]})]})}),d==="orders"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:s("Place Order")}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Full Name")," *"]}),e.jsx("input",{type:"text",value:n.name,onChange:t=>i(a=>({...a,name:t.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:s("Enter your full name")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Phone Number")," *"]}),e.jsx("input",{type:"tel",value:n.phone,onChange:t=>i(a=>({...a,phone:t.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:s("Enter phone number")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Delivery Address")," *"]}),e.jsx("textarea",{value:n.address,onChange:t=>i(a=>({...a,address:t.target.value})),required:!0,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:s("Enter complete delivery address")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("Notes")," (Optional)"]}),e.jsx("textarea",{value:n.notes,onChange:t=>i(a=>({...a,notes:t.target.value})),rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:s("Any special instructions or notes")})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:s("Order Summary")}),e.jsxs("div",{className:"space-y-2",children:[l.map(t=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[t.medicine.name," x ",t.quantity]}),e.jsxs("span",{children:["â‚¹",(t.medicine.price||0)*t.quantity]})]},t.medicineId)),e.jsxs("div",{className:"border-t border-gray-300 pt-2 flex justify-between font-medium",children:[e.jsxs("span",{children:[s("Total"),":"]}),e.jsxs("span",{children:["â‚¹",f()]})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>m("cart"),className:"flex-1 px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:s("Back to Cart")}),e.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:b?s("Placing Order..."):s("Place Order")})]})]})]})})]})]})}export{I as default};
